// -------------------------------------------------------------------------------------------------------------------------- //
// SPDX-License-Identifier: MIT
// Copyright (c) 2025 Francisco Romano
// -------------------------------------------------------------------------------------------------------------------------- //
#include "libX11.h"
#include <dlfcn.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#define LOAD_REQUIRED_SYMBOL(Name)\
_libX11.Name = dlsym(_libX11.so, #Name);\
if (!_libX11.Name) { printf("ERROR: failed to load symbol '" #Name "'\n"); return false; }
// -------------------------------------------------------------------------------------------------------------------------- //

struct _libX11_so _libX11 = { NULL };

bool _free_libX11_so()
{
    // check if library was unloaded
    if (!_libX11.so) return false;

    // unload and reset library handle
    dlclose(_libX11.so);
    _libX11.so = NULL;
    return true;
}

bool _load_libX11_so()
{
    // check if library was loaded
    if (_libX11.so) return true;

    // iterate through all library paths
    const char* paths[] = { "libX11.so.6.4.0", NULL };
    for (size_t i = 0; paths[i]; i++)
    {
        // try loading library and any symbols
        _libX11.so = dlopen(paths[i], RTLD_LAZY);
        if (_libX11.so == NULL) continue;
        LOAD_REQUIRED_SYMBOL(_Xmblen)
        LOAD_REQUIRED_SYMBOL(_Xmbtowc)
        LOAD_REQUIRED_SYMBOL(_Xwctomb)
        LOAD_REQUIRED_SYMBOL(XActivateScreenSaver)
        LOAD_REQUIRED_SYMBOL(XAddConnectionWatch)
        LOAD_REQUIRED_SYMBOL(XAddExtension)
        LOAD_REQUIRED_SYMBOL(XAddHost)
        LOAD_REQUIRED_SYMBOL(XAddHosts)
        LOAD_REQUIRED_SYMBOL(XAddToExtensionList)
        LOAD_REQUIRED_SYMBOL(XAddToSaveSet)
        LOAD_REQUIRED_SYMBOL(XAllocColor)
        LOAD_REQUIRED_SYMBOL(XAllocColorCells)
        LOAD_REQUIRED_SYMBOL(XAllocColorPlanes)
        LOAD_REQUIRED_SYMBOL(XAllocNamedColor)
        LOAD_REQUIRED_SYMBOL(XAllowEvents)
        LOAD_REQUIRED_SYMBOL(XAllPlanes)
        LOAD_REQUIRED_SYMBOL(XAutoRepeatOff)
        LOAD_REQUIRED_SYMBOL(XAutoRepeatOn)
        LOAD_REQUIRED_SYMBOL(XBaseFontNameListOfFontSet)
        LOAD_REQUIRED_SYMBOL(XBell)
        LOAD_REQUIRED_SYMBOL(XBitmapBitOrder)
        LOAD_REQUIRED_SYMBOL(XBitmapPad)
        LOAD_REQUIRED_SYMBOL(XBitmapUnit)
        LOAD_REQUIRED_SYMBOL(XBlackPixel)
        LOAD_REQUIRED_SYMBOL(XBlackPixelOfScreen)
        LOAD_REQUIRED_SYMBOL(XCellsOfScreen)
        LOAD_REQUIRED_SYMBOL(XChangeActivePointerGrab)
        LOAD_REQUIRED_SYMBOL(XChangeGC)
        LOAD_REQUIRED_SYMBOL(XChangeKeyboardControl)
        LOAD_REQUIRED_SYMBOL(XChangeKeyboardMapping)
        LOAD_REQUIRED_SYMBOL(XChangePointerControl)
        LOAD_REQUIRED_SYMBOL(XChangeProperty)
        LOAD_REQUIRED_SYMBOL(XChangeSaveSet)
        LOAD_REQUIRED_SYMBOL(XChangeWindowAttributes)
        LOAD_REQUIRED_SYMBOL(XCheckIfEvent)
        LOAD_REQUIRED_SYMBOL(XCheckMaskEvent)
        LOAD_REQUIRED_SYMBOL(XCheckTypedEvent)
        LOAD_REQUIRED_SYMBOL(XCheckTypedWindowEvent)
        LOAD_REQUIRED_SYMBOL(XCheckWindowEvent)
        LOAD_REQUIRED_SYMBOL(XCirculateSubwindows)
        LOAD_REQUIRED_SYMBOL(XCirculateSubwindowsDown)
        LOAD_REQUIRED_SYMBOL(XCirculateSubwindowsUp)
        LOAD_REQUIRED_SYMBOL(XClearArea)
        LOAD_REQUIRED_SYMBOL(XClearWindow)
        LOAD_REQUIRED_SYMBOL(XCloseDisplay)
        LOAD_REQUIRED_SYMBOL(XCloseIM)
        LOAD_REQUIRED_SYMBOL(XCloseOM)
        LOAD_REQUIRED_SYMBOL(XConfigureWindow)
        LOAD_REQUIRED_SYMBOL(XConnectionNumber)
        LOAD_REQUIRED_SYMBOL(XContextDependentDrawing)
        LOAD_REQUIRED_SYMBOL(XContextualDrawing)
        LOAD_REQUIRED_SYMBOL(XConvertSelection)
        LOAD_REQUIRED_SYMBOL(XCopyArea)
        LOAD_REQUIRED_SYMBOL(XCopyColormapAndFree)
        LOAD_REQUIRED_SYMBOL(XCopyGC)
        LOAD_REQUIRED_SYMBOL(XCopyPlane)
        LOAD_REQUIRED_SYMBOL(XCreateBitmapFromData)
        LOAD_REQUIRED_SYMBOL(XCreateColormap)
        LOAD_REQUIRED_SYMBOL(XCreateFontCursor)
        LOAD_REQUIRED_SYMBOL(XCreateFontSet)
        LOAD_REQUIRED_SYMBOL(XCreateGC)
        LOAD_REQUIRED_SYMBOL(XCreateGlyphCursor)
        LOAD_REQUIRED_SYMBOL(XCreateIC)
        LOAD_REQUIRED_SYMBOL(XCreateImage)
        LOAD_REQUIRED_SYMBOL(XCreateOC)
        LOAD_REQUIRED_SYMBOL(XCreatePixmap)
        LOAD_REQUIRED_SYMBOL(XCreatePixmapCursor)
        LOAD_REQUIRED_SYMBOL(XCreatePixmapFromBitmapData)
        LOAD_REQUIRED_SYMBOL(XCreateSimpleWindow)
        LOAD_REQUIRED_SYMBOL(XCreateWindow)
        LOAD_REQUIRED_SYMBOL(XDefaultColormap)
        LOAD_REQUIRED_SYMBOL(XDefaultColormapOfScreen)
        LOAD_REQUIRED_SYMBOL(XDefaultDepth)
        LOAD_REQUIRED_SYMBOL(XDefaultDepthOfScreen)
        LOAD_REQUIRED_SYMBOL(XDefaultGC)
        LOAD_REQUIRED_SYMBOL(XDefaultGCOfScreen)
        LOAD_REQUIRED_SYMBOL(XDefaultRootWindow)
        LOAD_REQUIRED_SYMBOL(XDefaultScreen)
        LOAD_REQUIRED_SYMBOL(XDefaultScreenOfDisplay)
        LOAD_REQUIRED_SYMBOL(XDefaultVisual)
        LOAD_REQUIRED_SYMBOL(XDefaultVisualOfScreen)
        LOAD_REQUIRED_SYMBOL(XDefineCursor)
        LOAD_REQUIRED_SYMBOL(XDeleteModifiermapEntry)
        LOAD_REQUIRED_SYMBOL(XDeleteProperty)
        LOAD_REQUIRED_SYMBOL(XDestroyIC)
        LOAD_REQUIRED_SYMBOL(XDestroyOC)
        LOAD_REQUIRED_SYMBOL(XDestroySubwindows)
        LOAD_REQUIRED_SYMBOL(XDestroyWindow)
        LOAD_REQUIRED_SYMBOL(XDirectionalDependentDrawing)
        LOAD_REQUIRED_SYMBOL(XDisableAccessControl)
        LOAD_REQUIRED_SYMBOL(XDisplayCells)
        LOAD_REQUIRED_SYMBOL(XDisplayHeight)
        LOAD_REQUIRED_SYMBOL(XDisplayHeightMM)
        LOAD_REQUIRED_SYMBOL(XDisplayKeycodes)
        LOAD_REQUIRED_SYMBOL(XDisplayMotionBufferSize)
        LOAD_REQUIRED_SYMBOL(XDisplayName)
        LOAD_REQUIRED_SYMBOL(XDisplayOfIM)
        LOAD_REQUIRED_SYMBOL(XDisplayOfOM)
        LOAD_REQUIRED_SYMBOL(XDisplayOfScreen)
        LOAD_REQUIRED_SYMBOL(XDisplayPlanes)
        LOAD_REQUIRED_SYMBOL(XDisplayString)
        LOAD_REQUIRED_SYMBOL(XDisplayWidth)
        LOAD_REQUIRED_SYMBOL(XDisplayWidthMM)
        LOAD_REQUIRED_SYMBOL(XDoesBackingStore)
        LOAD_REQUIRED_SYMBOL(XDoesSaveUnders)
        LOAD_REQUIRED_SYMBOL(XDrawArc)
        LOAD_REQUIRED_SYMBOL(XDrawArcs)
        LOAD_REQUIRED_SYMBOL(XDrawImageString)
        LOAD_REQUIRED_SYMBOL(XDrawImageString16)
        LOAD_REQUIRED_SYMBOL(XDrawLine)
        LOAD_REQUIRED_SYMBOL(XDrawLines)
        LOAD_REQUIRED_SYMBOL(XDrawPoint)
        LOAD_REQUIRED_SYMBOL(XDrawPoints)
        LOAD_REQUIRED_SYMBOL(XDrawRectangle)
        LOAD_REQUIRED_SYMBOL(XDrawRectangles)
        LOAD_REQUIRED_SYMBOL(XDrawSegments)
        LOAD_REQUIRED_SYMBOL(XDrawString)
        LOAD_REQUIRED_SYMBOL(XDrawString16)
        LOAD_REQUIRED_SYMBOL(XDrawText)
        LOAD_REQUIRED_SYMBOL(XDrawText16)
        LOAD_REQUIRED_SYMBOL(XEHeadOfExtensionList)
        LOAD_REQUIRED_SYMBOL(XEnableAccessControl)
        LOAD_REQUIRED_SYMBOL(XEventMaskOfScreen)
        LOAD_REQUIRED_SYMBOL(XEventsQueued)
        LOAD_REQUIRED_SYMBOL(XExtendedMaxRequestSize)
        LOAD_REQUIRED_SYMBOL(XExtentsOfFontSet)
        LOAD_REQUIRED_SYMBOL(XFetchBuffer)
        LOAD_REQUIRED_SYMBOL(XFetchBytes)
        LOAD_REQUIRED_SYMBOL(XFetchName)
        LOAD_REQUIRED_SYMBOL(XFillArc)
        LOAD_REQUIRED_SYMBOL(XFillArcs)
        LOAD_REQUIRED_SYMBOL(XFillPolygon)
        LOAD_REQUIRED_SYMBOL(XFillRectangle)
        LOAD_REQUIRED_SYMBOL(XFillRectangles)
        LOAD_REQUIRED_SYMBOL(XFilterEvent)
        LOAD_REQUIRED_SYMBOL(XFindOnExtensionList)
        LOAD_REQUIRED_SYMBOL(XFlush)
        LOAD_REQUIRED_SYMBOL(XFlushGC)
        LOAD_REQUIRED_SYMBOL(XFontsOfFontSet)
        LOAD_REQUIRED_SYMBOL(XForceScreenSaver)
        LOAD_REQUIRED_SYMBOL(XFree)
        LOAD_REQUIRED_SYMBOL(XFreeColormap)
        LOAD_REQUIRED_SYMBOL(XFreeColors)
        LOAD_REQUIRED_SYMBOL(XFreeCursor)
        LOAD_REQUIRED_SYMBOL(XFreeEventData)
        LOAD_REQUIRED_SYMBOL(XFreeExtensionList)
        LOAD_REQUIRED_SYMBOL(XFreeFont)
        LOAD_REQUIRED_SYMBOL(XFreeFontInfo)
        LOAD_REQUIRED_SYMBOL(XFreeFontNames)
        LOAD_REQUIRED_SYMBOL(XFreeFontPath)
        LOAD_REQUIRED_SYMBOL(XFreeFontSet)
        LOAD_REQUIRED_SYMBOL(XFreeGC)
        LOAD_REQUIRED_SYMBOL(XFreeModifiermap)
        LOAD_REQUIRED_SYMBOL(XFreePixmap)
        LOAD_REQUIRED_SYMBOL(XFreeStringList)
        LOAD_REQUIRED_SYMBOL(XFreeThreads)
        LOAD_REQUIRED_SYMBOL(XGContextFromGC)
        LOAD_REQUIRED_SYMBOL(XGeometry)
        LOAD_REQUIRED_SYMBOL(XGetAtomName)
        LOAD_REQUIRED_SYMBOL(XGetAtomNames)
        LOAD_REQUIRED_SYMBOL(XGetCommand)
        LOAD_REQUIRED_SYMBOL(XGetDefault)
        LOAD_REQUIRED_SYMBOL(XGetErrorDatabaseText)
        LOAD_REQUIRED_SYMBOL(XGetErrorText)
        LOAD_REQUIRED_SYMBOL(XGetEventData)
        LOAD_REQUIRED_SYMBOL(XGetFontPath)
        LOAD_REQUIRED_SYMBOL(XGetFontProperty)
        LOAD_REQUIRED_SYMBOL(XGetGCValues)
        LOAD_REQUIRED_SYMBOL(XGetGeometry)
        LOAD_REQUIRED_SYMBOL(XGetIconName)
        LOAD_REQUIRED_SYMBOL(XGetICValues)
        LOAD_REQUIRED_SYMBOL(XGetImage)
        LOAD_REQUIRED_SYMBOL(XGetIMValues)
        LOAD_REQUIRED_SYMBOL(XGetInputFocus)
        LOAD_REQUIRED_SYMBOL(XGetKeyboardControl)
        LOAD_REQUIRED_SYMBOL(XGetKeyboardMapping)
        LOAD_REQUIRED_SYMBOL(XGetModifierMapping)
        LOAD_REQUIRED_SYMBOL(XGetMotionEvents)
        LOAD_REQUIRED_SYMBOL(XGetOCValues)
        LOAD_REQUIRED_SYMBOL(XGetOMValues)
        LOAD_REQUIRED_SYMBOL(XGetPointerControl)
        LOAD_REQUIRED_SYMBOL(XGetPointerMapping)
        LOAD_REQUIRED_SYMBOL(XGetScreenSaver)
        LOAD_REQUIRED_SYMBOL(XGetSelectionOwner)
        LOAD_REQUIRED_SYMBOL(XGetSubImage)
        LOAD_REQUIRED_SYMBOL(XGetTransientForHint)
        LOAD_REQUIRED_SYMBOL(XGetWindowAttributes)
        LOAD_REQUIRED_SYMBOL(XGetWindowProperty)
        LOAD_REQUIRED_SYMBOL(XGetWMColormapWindows)
        LOAD_REQUIRED_SYMBOL(XGetWMProtocols)
        LOAD_REQUIRED_SYMBOL(XGrabButton)
        LOAD_REQUIRED_SYMBOL(XGrabKey)
        LOAD_REQUIRED_SYMBOL(XGrabKeyboard)
        LOAD_REQUIRED_SYMBOL(XGrabPointer)
        LOAD_REQUIRED_SYMBOL(XGrabServer)
        LOAD_REQUIRED_SYMBOL(XHeightMMOfScreen)
        LOAD_REQUIRED_SYMBOL(XHeightOfScreen)
        LOAD_REQUIRED_SYMBOL(XIconifyWindow)
        LOAD_REQUIRED_SYMBOL(XIfEvent)
        LOAD_REQUIRED_SYMBOL(XImageByteOrder)
        LOAD_REQUIRED_SYMBOL(XIMOfIC)
        LOAD_REQUIRED_SYMBOL(XInitExtension)
        LOAD_REQUIRED_SYMBOL(XInitImage)
        LOAD_REQUIRED_SYMBOL(XInitThreads)
        LOAD_REQUIRED_SYMBOL(XInsertModifiermapEntry)
        LOAD_REQUIRED_SYMBOL(XInstallColormap)
        LOAD_REQUIRED_SYMBOL(XInternalConnectionNumbers)
        LOAD_REQUIRED_SYMBOL(XInternAtom)
        LOAD_REQUIRED_SYMBOL(XInternAtoms)
        LOAD_REQUIRED_SYMBOL(XKeycodeToKeysym)
        LOAD_REQUIRED_SYMBOL(XKeysymToKeycode)
        LOAD_REQUIRED_SYMBOL(XKeysymToString)
        LOAD_REQUIRED_SYMBOL(XKillClient)
        LOAD_REQUIRED_SYMBOL(XLastKnownRequestProcessed)
        LOAD_REQUIRED_SYMBOL(XListDepths)
        LOAD_REQUIRED_SYMBOL(XListExtensions)
        LOAD_REQUIRED_SYMBOL(XListFonts)
        LOAD_REQUIRED_SYMBOL(XListFontsWithInfo)
        LOAD_REQUIRED_SYMBOL(XListHosts)
        LOAD_REQUIRED_SYMBOL(XListInstalledColormaps)
        LOAD_REQUIRED_SYMBOL(XListPixmapFormats)
        LOAD_REQUIRED_SYMBOL(XListProperties)
        LOAD_REQUIRED_SYMBOL(XLoadFont)
        LOAD_REQUIRED_SYMBOL(XLoadQueryFont)
        LOAD_REQUIRED_SYMBOL(XLocaleOfFontSet)
        LOAD_REQUIRED_SYMBOL(XLocaleOfIM)
        LOAD_REQUIRED_SYMBOL(XLocaleOfOM)
        LOAD_REQUIRED_SYMBOL(XLockDisplay)
        LOAD_REQUIRED_SYMBOL(XLookupColor)
        LOAD_REQUIRED_SYMBOL(XLookupKeysym)
        LOAD_REQUIRED_SYMBOL(XLowerWindow)
        LOAD_REQUIRED_SYMBOL(XMapRaised)
        LOAD_REQUIRED_SYMBOL(XMapSubwindows)
        LOAD_REQUIRED_SYMBOL(XMapWindow)
        LOAD_REQUIRED_SYMBOL(XMaskEvent)
        LOAD_REQUIRED_SYMBOL(XMaxCmapsOfScreen)
        LOAD_REQUIRED_SYMBOL(XMaxRequestSize)
        LOAD_REQUIRED_SYMBOL(XmbDrawImageString)
        LOAD_REQUIRED_SYMBOL(XmbDrawString)
        LOAD_REQUIRED_SYMBOL(XmbDrawText)
        LOAD_REQUIRED_SYMBOL(XmbLookupString)
        LOAD_REQUIRED_SYMBOL(XmbResetIC)
        LOAD_REQUIRED_SYMBOL(XmbTextEscapement)
        LOAD_REQUIRED_SYMBOL(XmbTextExtents)
        LOAD_REQUIRED_SYMBOL(XmbTextPerCharExtents)
        LOAD_REQUIRED_SYMBOL(XMinCmapsOfScreen)
        LOAD_REQUIRED_SYMBOL(XMoveResizeWindow)
        LOAD_REQUIRED_SYMBOL(XMoveWindow)
        LOAD_REQUIRED_SYMBOL(XNewModifiermap)
        LOAD_REQUIRED_SYMBOL(XNextEvent)
        LOAD_REQUIRED_SYMBOL(XNextRequest)
        LOAD_REQUIRED_SYMBOL(XNoOp)
        LOAD_REQUIRED_SYMBOL(XOMOfOC)
        LOAD_REQUIRED_SYMBOL(XOpenDisplay)
        LOAD_REQUIRED_SYMBOL(XOpenIM)
        LOAD_REQUIRED_SYMBOL(XOpenOM)
        LOAD_REQUIRED_SYMBOL(XParseColor)
        LOAD_REQUIRED_SYMBOL(XParseGeometry)
        LOAD_REQUIRED_SYMBOL(XPeekEvent)
        LOAD_REQUIRED_SYMBOL(XPeekIfEvent)
        LOAD_REQUIRED_SYMBOL(XPending)
        LOAD_REQUIRED_SYMBOL(XPlanesOfScreen)
        LOAD_REQUIRED_SYMBOL(XProcessInternalConnection)
        LOAD_REQUIRED_SYMBOL(XProtocolRevision)
        LOAD_REQUIRED_SYMBOL(XProtocolVersion)
        LOAD_REQUIRED_SYMBOL(XPutBackEvent)
        LOAD_REQUIRED_SYMBOL(XPutImage)
        LOAD_REQUIRED_SYMBOL(XQLength)
        LOAD_REQUIRED_SYMBOL(XQueryBestCursor)
        LOAD_REQUIRED_SYMBOL(XQueryBestSize)
        LOAD_REQUIRED_SYMBOL(XQueryBestStipple)
        LOAD_REQUIRED_SYMBOL(XQueryBestTile)
        LOAD_REQUIRED_SYMBOL(XQueryColor)
        LOAD_REQUIRED_SYMBOL(XQueryColors)
        LOAD_REQUIRED_SYMBOL(XQueryExtension)
        LOAD_REQUIRED_SYMBOL(XQueryFont)
        LOAD_REQUIRED_SYMBOL(XQueryKeymap)
        LOAD_REQUIRED_SYMBOL(XQueryPointer)
        LOAD_REQUIRED_SYMBOL(XQueryTextExtents)
        LOAD_REQUIRED_SYMBOL(XQueryTextExtents16)
        LOAD_REQUIRED_SYMBOL(XQueryTree)
        LOAD_REQUIRED_SYMBOL(XRaiseWindow)
        LOAD_REQUIRED_SYMBOL(XReadBitmapFile)
        LOAD_REQUIRED_SYMBOL(XReadBitmapFileData)
        LOAD_REQUIRED_SYMBOL(XRebindKeysym)
        LOAD_REQUIRED_SYMBOL(XRecolorCursor)
        LOAD_REQUIRED_SYMBOL(XReconfigureWMWindow)
        LOAD_REQUIRED_SYMBOL(XRefreshKeyboardMapping)
        LOAD_REQUIRED_SYMBOL(XRegisterIMInstantiateCallback)
        LOAD_REQUIRED_SYMBOL(XRemoveConnectionWatch)
        LOAD_REQUIRED_SYMBOL(XRemoveFromSaveSet)
        LOAD_REQUIRED_SYMBOL(XRemoveHost)
        LOAD_REQUIRED_SYMBOL(XRemoveHosts)
        LOAD_REQUIRED_SYMBOL(XReparentWindow)
        LOAD_REQUIRED_SYMBOL(XResetScreenSaver)
        LOAD_REQUIRED_SYMBOL(XResizeWindow)
        LOAD_REQUIRED_SYMBOL(XResourceManagerString)
        LOAD_REQUIRED_SYMBOL(XRestackWindows)
        LOAD_REQUIRED_SYMBOL(XrmInitialize)
        LOAD_REQUIRED_SYMBOL(XrmUniqueQuark)
        LOAD_REQUIRED_SYMBOL(XRootWindow)
        LOAD_REQUIRED_SYMBOL(XRootWindowOfScreen)
        LOAD_REQUIRED_SYMBOL(XRotateBuffers)
        LOAD_REQUIRED_SYMBOL(XRotateWindowProperties)
        LOAD_REQUIRED_SYMBOL(XScreenCount)
        LOAD_REQUIRED_SYMBOL(XScreenNumberOfScreen)
        LOAD_REQUIRED_SYMBOL(XScreenOfDisplay)
        LOAD_REQUIRED_SYMBOL(XScreenResourceString)
        LOAD_REQUIRED_SYMBOL(XSelectInput)
        LOAD_REQUIRED_SYMBOL(XSendEvent)
        LOAD_REQUIRED_SYMBOL(XServerVendor)
        LOAD_REQUIRED_SYMBOL(XSetAccessControl)
        LOAD_REQUIRED_SYMBOL(XSetArcMode)
        LOAD_REQUIRED_SYMBOL(XSetAuthorization)
        LOAD_REQUIRED_SYMBOL(XSetBackground)
        LOAD_REQUIRED_SYMBOL(XSetClipMask)
        LOAD_REQUIRED_SYMBOL(XSetClipOrigin)
        LOAD_REQUIRED_SYMBOL(XSetClipRectangles)
        LOAD_REQUIRED_SYMBOL(XSetCloseDownMode)
        LOAD_REQUIRED_SYMBOL(XSetCommand)
        LOAD_REQUIRED_SYMBOL(XSetDashes)
        LOAD_REQUIRED_SYMBOL(XSetErrorHandler)
        LOAD_REQUIRED_SYMBOL(XSetFillRule)
        LOAD_REQUIRED_SYMBOL(XSetFillStyle)
        LOAD_REQUIRED_SYMBOL(XSetFont)
        LOAD_REQUIRED_SYMBOL(XSetFontPath)
        LOAD_REQUIRED_SYMBOL(XSetForeground)
        LOAD_REQUIRED_SYMBOL(XSetFunction)
        LOAD_REQUIRED_SYMBOL(XSetGraphicsExposures)
        LOAD_REQUIRED_SYMBOL(XSetICFocus)
        LOAD_REQUIRED_SYMBOL(XSetIconName)
        LOAD_REQUIRED_SYMBOL(XSetICValues)
        LOAD_REQUIRED_SYMBOL(XSetIMValues)
        LOAD_REQUIRED_SYMBOL(XSetInputFocus)
        LOAD_REQUIRED_SYMBOL(XSetIOErrorExitHandler)
        LOAD_REQUIRED_SYMBOL(XSetIOErrorHandler)
        LOAD_REQUIRED_SYMBOL(XSetLineAttributes)
        LOAD_REQUIRED_SYMBOL(XSetLocaleModifiers)
        LOAD_REQUIRED_SYMBOL(XSetModifierMapping)
        LOAD_REQUIRED_SYMBOL(XSetOCValues)
        LOAD_REQUIRED_SYMBOL(XSetOMValues)
        LOAD_REQUIRED_SYMBOL(XSetPlaneMask)
        LOAD_REQUIRED_SYMBOL(XSetPointerMapping)
        LOAD_REQUIRED_SYMBOL(XSetScreenSaver)
        LOAD_REQUIRED_SYMBOL(XSetSelectionOwner)
        LOAD_REQUIRED_SYMBOL(XSetState)
        LOAD_REQUIRED_SYMBOL(XSetStipple)
        LOAD_REQUIRED_SYMBOL(XSetSubwindowMode)
        LOAD_REQUIRED_SYMBOL(XSetTile)
        LOAD_REQUIRED_SYMBOL(XSetTransientForHint)
        LOAD_REQUIRED_SYMBOL(XSetTSOrigin)
        LOAD_REQUIRED_SYMBOL(XSetWindowBackground)
        LOAD_REQUIRED_SYMBOL(XSetWindowBackgroundPixmap)
        LOAD_REQUIRED_SYMBOL(XSetWindowBorder)
        LOAD_REQUIRED_SYMBOL(XSetWindowBorderPixmap)
        LOAD_REQUIRED_SYMBOL(XSetWindowBorderWidth)
        LOAD_REQUIRED_SYMBOL(XSetWindowColormap)
        LOAD_REQUIRED_SYMBOL(XSetWMColormapWindows)
        LOAD_REQUIRED_SYMBOL(XSetWMProtocols)
        LOAD_REQUIRED_SYMBOL(XStoreBuffer)
        LOAD_REQUIRED_SYMBOL(XStoreBytes)
        LOAD_REQUIRED_SYMBOL(XStoreColor)
        LOAD_REQUIRED_SYMBOL(XStoreColors)
        LOAD_REQUIRED_SYMBOL(XStoreName)
        LOAD_REQUIRED_SYMBOL(XStoreNamedColor)
        LOAD_REQUIRED_SYMBOL(XStringToKeysym)
        LOAD_REQUIRED_SYMBOL(XSupportsLocale)
        LOAD_REQUIRED_SYMBOL(XSync)
        LOAD_REQUIRED_SYMBOL(XTextExtents)
        LOAD_REQUIRED_SYMBOL(XTextExtents16)
        LOAD_REQUIRED_SYMBOL(XTextWidth)
        LOAD_REQUIRED_SYMBOL(XTextWidth16)
        LOAD_REQUIRED_SYMBOL(XTranslateCoordinates)
        LOAD_REQUIRED_SYMBOL(XUndefineCursor)
        LOAD_REQUIRED_SYMBOL(XUngrabButton)
        LOAD_REQUIRED_SYMBOL(XUngrabKey)
        LOAD_REQUIRED_SYMBOL(XUngrabKeyboard)
        LOAD_REQUIRED_SYMBOL(XUngrabPointer)
        LOAD_REQUIRED_SYMBOL(XUngrabServer)
        LOAD_REQUIRED_SYMBOL(XUninstallColormap)
        LOAD_REQUIRED_SYMBOL(XUnloadFont)
        LOAD_REQUIRED_SYMBOL(XUnlockDisplay)
        LOAD_REQUIRED_SYMBOL(XUnmapSubwindows)
        LOAD_REQUIRED_SYMBOL(XUnmapWindow)
        LOAD_REQUIRED_SYMBOL(XUnregisterIMInstantiateCallback)
        LOAD_REQUIRED_SYMBOL(XUnsetICFocus)
        LOAD_REQUIRED_SYMBOL(Xutf8DrawImageString)
        LOAD_REQUIRED_SYMBOL(Xutf8DrawString)
        LOAD_REQUIRED_SYMBOL(Xutf8DrawText)
        LOAD_REQUIRED_SYMBOL(Xutf8LookupString)
        LOAD_REQUIRED_SYMBOL(Xutf8ResetIC)
        LOAD_REQUIRED_SYMBOL(Xutf8TextEscapement)
        LOAD_REQUIRED_SYMBOL(Xutf8TextExtents)
        LOAD_REQUIRED_SYMBOL(Xutf8TextPerCharExtents)
        LOAD_REQUIRED_SYMBOL(XVaCreateNestedList)
        LOAD_REQUIRED_SYMBOL(XVendorRelease)
        LOAD_REQUIRED_SYMBOL(XVisualIDFromVisual)
        LOAD_REQUIRED_SYMBOL(XWarpPointer)
        LOAD_REQUIRED_SYMBOL(XwcDrawImageString)
        LOAD_REQUIRED_SYMBOL(XwcDrawString)
        LOAD_REQUIRED_SYMBOL(XwcDrawText)
        LOAD_REQUIRED_SYMBOL(XwcLookupString)
        LOAD_REQUIRED_SYMBOL(XwcResetIC)
        LOAD_REQUIRED_SYMBOL(XwcTextEscapement)
        LOAD_REQUIRED_SYMBOL(XwcTextExtents)
        LOAD_REQUIRED_SYMBOL(XwcTextPerCharExtents)
        LOAD_REQUIRED_SYMBOL(XWhitePixel)
        LOAD_REQUIRED_SYMBOL(XWhitePixelOfScreen)
        LOAD_REQUIRED_SYMBOL(XWidthMMOfScreen)
        LOAD_REQUIRED_SYMBOL(XWidthOfScreen)
        LOAD_REQUIRED_SYMBOL(XWindowEvent)
        LOAD_REQUIRED_SYMBOL(XWithdrawWindow)
        LOAD_REQUIRED_SYMBOL(XWriteBitmapFile)
        // #include <X11/Xutil.h>
        LOAD_REQUIRED_SYMBOL(XDestroyImage)
        LOAD_REQUIRED_SYMBOL(XGetPixel)
        LOAD_REQUIRED_SYMBOL(XPutPixel)
        LOAD_REQUIRED_SYMBOL(XSubImage)
        LOAD_REQUIRED_SYMBOL(XAddPixel)
        LOAD_REQUIRED_SYMBOL(XAllocClassHint)
        LOAD_REQUIRED_SYMBOL(XAllocIconSize)
        LOAD_REQUIRED_SYMBOL(XAllocSizeHints)
        LOAD_REQUIRED_SYMBOL(XAllocStandardColormap)
        LOAD_REQUIRED_SYMBOL(XAllocWMHints)
        LOAD_REQUIRED_SYMBOL(XClipBox)
        LOAD_REQUIRED_SYMBOL(XCreateRegion)
        LOAD_REQUIRED_SYMBOL(XDefaultString)
        LOAD_REQUIRED_SYMBOL(XDeleteContext)
        LOAD_REQUIRED_SYMBOL(XDestroyRegion)
        LOAD_REQUIRED_SYMBOL(XEmptyRegion)
        LOAD_REQUIRED_SYMBOL(XEqualRegion)
        LOAD_REQUIRED_SYMBOL(XFindContext)
        LOAD_REQUIRED_SYMBOL(XGetClassHint)
        LOAD_REQUIRED_SYMBOL(XGetIconSizes)
        LOAD_REQUIRED_SYMBOL(XGetNormalHints)
        LOAD_REQUIRED_SYMBOL(XGetRGBColormaps)
        LOAD_REQUIRED_SYMBOL(XGetSizeHints)
        LOAD_REQUIRED_SYMBOL(XGetStandardColormap)
        LOAD_REQUIRED_SYMBOL(XGetTextProperty)
        LOAD_REQUIRED_SYMBOL(XGetVisualInfo)
        LOAD_REQUIRED_SYMBOL(XGetWMClientMachine)
        LOAD_REQUIRED_SYMBOL(XGetWMHints)
        LOAD_REQUIRED_SYMBOL(XGetWMIconName)
        LOAD_REQUIRED_SYMBOL(XGetWMName)
        LOAD_REQUIRED_SYMBOL(XGetWMNormalHints)
        LOAD_REQUIRED_SYMBOL(XGetWMSizeHints)
        LOAD_REQUIRED_SYMBOL(XGetZoomHints)
        LOAD_REQUIRED_SYMBOL(XIntersectRegion)
        LOAD_REQUIRED_SYMBOL(XConvertCase)
        LOAD_REQUIRED_SYMBOL(XLookupString)
        LOAD_REQUIRED_SYMBOL(XMatchVisualInfo)
        LOAD_REQUIRED_SYMBOL(XOffsetRegion)
        LOAD_REQUIRED_SYMBOL(XPointInRegion)
        LOAD_REQUIRED_SYMBOL(XPolygonRegion)
        LOAD_REQUIRED_SYMBOL(XRectInRegion)
        LOAD_REQUIRED_SYMBOL(XSaveContext)
        LOAD_REQUIRED_SYMBOL(XSetClassHint)
        LOAD_REQUIRED_SYMBOL(XSetIconSizes)
        LOAD_REQUIRED_SYMBOL(XSetNormalHints)
        LOAD_REQUIRED_SYMBOL(XSetRGBColormaps)
        LOAD_REQUIRED_SYMBOL(XSetSizeHints)
        LOAD_REQUIRED_SYMBOL(XSetStandardProperties)
        LOAD_REQUIRED_SYMBOL(XSetTextProperty)
        LOAD_REQUIRED_SYMBOL(XSetWMClientMachine)
        LOAD_REQUIRED_SYMBOL(XSetWMHints)
        LOAD_REQUIRED_SYMBOL(XSetWMIconName)
        LOAD_REQUIRED_SYMBOL(XSetWMName)
        LOAD_REQUIRED_SYMBOL(XSetWMNormalHints)
        LOAD_REQUIRED_SYMBOL(XSetWMProperties)
        LOAD_REQUIRED_SYMBOL(XmbSetWMProperties)
        LOAD_REQUIRED_SYMBOL(Xutf8SetWMProperties)
        LOAD_REQUIRED_SYMBOL(XSetWMSizeHints)
        LOAD_REQUIRED_SYMBOL(XSetRegion)
        LOAD_REQUIRED_SYMBOL(XSetStandardColormap)
        LOAD_REQUIRED_SYMBOL(XSetZoomHints)
        LOAD_REQUIRED_SYMBOL(XShrinkRegion)
        LOAD_REQUIRED_SYMBOL(XStringListToTextProperty)
        LOAD_REQUIRED_SYMBOL(XSubtractRegion)
        LOAD_REQUIRED_SYMBOL(XmbTextListToTextProperty)
        LOAD_REQUIRED_SYMBOL(XwcTextListToTextProperty)
        LOAD_REQUIRED_SYMBOL(Xutf8TextListToTextProperty)
        LOAD_REQUIRED_SYMBOL(XwcFreeStringList)
        LOAD_REQUIRED_SYMBOL(XTextPropertyToStringList)
        LOAD_REQUIRED_SYMBOL(XmbTextPropertyToTextList)
        LOAD_REQUIRED_SYMBOL(XwcTextPropertyToTextList)
        LOAD_REQUIRED_SYMBOL(Xutf8TextPropertyToTextList)
        LOAD_REQUIRED_SYMBOL(XUnionRectWithRegion)
        LOAD_REQUIRED_SYMBOL(XUnionRegion)
        LOAD_REQUIRED_SYMBOL(XWMGeometry)
        LOAD_REQUIRED_SYMBOL(XXorRegion)
        return true;
    }
    return false;
}

// -------------------------------------------------------------------------------------------------------------------------- //